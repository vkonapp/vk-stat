(this["webpackJsonpgroup-stat"]=this["webpackJsonpgroup-stat"]||[]).push([[0],{153:function(e,t,a){e.exports=a(233)},233:function(e,t,a){"use strict";a.r(t);a(154),a(181),a(183),a(184),a(186),a(187),a(188),a(189),a(190),a(191),a(192),a(193),a(195),a(196),a(197),a(198),a(199),a(200),a(201),a(202),a(203),a(204),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223);var n=a(0),s=a.n(n),r=a(67),c=a.n(r),o=a(10),l=a.n(o),i=a(41),u=a.n(i),m=a(68),d=a(13),b=(a(232),a(69)),p=["75 170 85","200 190 80","200 190 80","200 190 80","80 200 139"],f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.75;return"rgb("+p[e%p.length]+" / "+t+")"};var v=function(e){var t=e.stat,a=e.sortOrder,n=e.sortParam;return t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"likes";return e.sort((function(e,n){return"asc"==t&&(n=[e,e=n][0]),e[a]>n[a]?-1:e[a]<n[a]?1:0}))}(t,a,n),console.log(t,n),0==t.length?s.a.createElement("div",{id:"board"},"Load..."):s.a.createElement("div",{id:"board"},t.map((function(e,t){return s.a.createElement("div",{className:"item"},s.a.createElement("img",{src:e.img}),s.a.createElement("div",{className:"shadow",style:{background:f(t),boxShadow:"0 0 20px "+f(t,.1)}}),s.a.createElement("div",{className:"info"},s.a.createElement("span",{className:"name"},e.name),s.a.createElement("i",{className:"fas fa-user-alt","aria-hidden":"true"},s.a.createElement("span",null,e[n]))))})))},g=function(e){var t=e.getStat;function a(e){var a=new Date,n=new Date;switch(localStorage.time=e,e){case"today":a.setMinutes(0),a.setHours(0);break;case"yestoday":n.setMinutes(0),n.setHours(0),a=new Date(n-864e5);break;case"week":var s=n.getDay(),r=n.getDate()-s+(0==s?-6:1);a=new Date(a.setDate(r));break;case"month":a.setMinutes(0),a.setHours(0),a.setDate(1);break;case"year":a.setMinutes(0),a.setHours(0),a.setDate(1),a.setMonth(0);break;case"all_time":a=0,n=new Date}console.log(Math.floor(a/1e3),a,n,Math.floor(n/1e3)),t(Math.floor(a/1e3),Math.floor(n/1e3))}return Object(n.useEffect)((function(){a(localStorage.time)}),[]),s.a.createElement("select",{defaultValue:localStorage.time||"all_time",onChange:function(e){return a(e.target.value)}},s.a.createElement("option",{value:"today"},"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"),s.a.createElement("option",{value:"yestoday"},"\u0412\u0447\u0435\u0440\u0430"),s.a.createElement("option",{value:"week"},"\u041d\u0435\u0434\u0435\u043b\u044e"),s.a.createElement("option",{value:"month"},"\u041c\u0435\u0441\u044f\u0446"),s.a.createElement("option",{value:"year"},"\u0413\u043e\u0434"),s.a.createElement("option",{value:"all_time"},"\u0412\u0441\u0435 \u0432\u0440\u0435\u043c\u044f"))},h=(a(234),["subscribed","unsubscribed","likes","comments"]),E=function(e){var t=e.token,a=e.group,r=Object(n.useState)([]),c=Object(d.a)(r,2),o=c[0],i=c[1],u=Object(n.useState)(localStorage.sortParam||"likes"),m=Object(d.a)(u,2),p=m[0],f=m[1],E=Object(n.useState)(localStorage.sortOrder||"desc"),k=Object(d.a)(E,2),O=k[0],j=k[1],S=Object(n.useState)({likes:0,subscribed:0,comments:0}),y=Object(d.a)(S,2),w=y[0],_=y[1],M={likes:0,subscribed:0,comments:0};function D(e){f(e),localStorage.sortParam=e}return s.a.createElement("div",null,s.a.createElement("header",null,s.a.createElement("ul",{id:"menu"},s.a.createElement("li",{onClick:function(){D("subscribed")}},s.a.createElement("i",{className:"fas fa-user-alt"}),s.a.createElement("span",null,w.subscribed)),s.a.createElement("li",{onClick:function(){D("likes")}},s.a.createElement("i",{className:"fas fa-heart"}),s.a.createElement("span",null,w.likes)),s.a.createElement("li",{onClick:function(){D("comments")}},s.a.createElement("i",{className:"fas fa-comment"}),s.a.createElement("span",null,w.comments)),s.a.createElement("li",null,s.a.createElement("span",null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430: "),s.a.createElement(g,{getStat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.floor(+new Date/1e3);i([]),M={likes:0,subscribed:0,comments:0};var s=0;setTimeout((function r(){var c=a[s];l.a.send("VKWebAppCallAPIMethod",{method:"stats.get",params:{group_id:c.id,timestamp_from:e,timestamp_to:n,interval:"all",access_token:t,v:"5.86"}}).then((function(e){var t=e.response[0].activity;for(var a in void 0==t&&(t={}),h.forEach((function(e){e in t==0&&(t[e]=0)})),t.subscribed=t.subscribed-t.unsubscribed,i((function(e){return[].concat(Object(b.a)(e),[{id:c.id,name:c.name,img:c.photo_200,screen_name:c.screen_name,likes:t.likes,subscribed:t.subscribed,comments:t.comments}])})),M)M[a]+=t[a];_(M)})),++s<a.length&&setTimeout(r,120)}),100)}}),s.a.createElement("select",{onChange:function(e){var t;t=e.target.value,j(t),localStorage.sortOrder=t}},s.a.createElement("option",{value:"desc"},"\u041f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e"),s.a.createElement("option",{value:"asc"},"\u041f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e"))))),s.a.createElement(v,{stat:o,sortOrder:O,sortParam:p}))},k=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=(t[0],t[1]),r=Object(n.useState)(null),c=Object(d.a)(r,2),o=c[0],i=c[1],b=Object(n.useState)({begin:0,end:0}),p=Object(d.a)(b,2),f=(p[0],p[1],Object(n.useState)(null)),v=Object(d.a)(f,2),g=v[0],h=v[1];return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetUserInfo");case 2:return t=e.sent,a(t),e.next=6,l.a.send("VKWebAppGetAuthToken",{app_id:7715875,scope:"friends,status,groups,stats"});case 6:return n=e.sent.access_token,h(n),e.next=10,l.a.send("VKWebAppCallAPIMethod",{method:"groups.get",params:{extended:1,access_token:n,v:"5.86"}});case 10:"response"in(s=e.sent)&&(s=s.response.items.filter((function(e){return 1==e.is_admin}))),i(s);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var s=document.createAttribute("scheme");s.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(s)}})),function(){e.apply(this,arguments)}()}),[]),null!=o?s.a.createElement(E,{token:g,group:o}):s.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")};l.a.send("VKWebAppInit"),c.a.render(s.a.createElement(k,null),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.630ca606.chunk.js.map